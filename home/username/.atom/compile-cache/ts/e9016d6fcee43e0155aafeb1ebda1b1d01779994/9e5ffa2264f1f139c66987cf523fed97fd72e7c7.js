// Some docs
// http://www.html5rocks.com/en/tutorials/webcomponents/customelements/ (look at lifecycle callback methods)
var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var TsView = (function (_super) {
    __extends(TsView, _super);
    function TsView() {
        _super.apply(this, arguments);
    }
    TsView.prototype.createdCallback = function () {
        var preview = this.innerText;
        this.innerText = "";
        // Based on markdown editor
        // https://github.com/atom/markdown-preview/blob/2bcbadac3980f1aeb455f7078bd1fdfb4e6fe6b1/lib/renderer.coffee#L111
        var editorElement = this.editorElement = document.createElement('atom-text-editor');
        editorElement.setAttributeNode(document.createAttribute('gutter-hidden'));
        editorElement.removeAttribute('tabindex'); // make read-only
        var editor = this.editor = editorElement.getModel();
        editor.getDecorations({ class: 'cursor-line', type: 'line' })[0].destroy(); // remove the default selection of a line in each editor
        editor.setText(preview);
        var grammar = atom.grammars.grammarForScopeName("source.tsx");
        editor.setGrammar(grammar);
        editor.setSoftWrapped(true);
        this.appendChild(editorElement);
    };
    // API
    TsView.prototype.text = function (text) {
        this.editor.setText(text);
    };
    return TsView;
})(HTMLElement);
exports.TsView = TsView;
document.registerElement('ts-view', TsView);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvamFtZXMvLmF0b20vcGFja2FnZXMvYXRvbS10eXBlc2NyaXB0L2xpYi9tYWluL2F0b20vY29tcG9uZW50cy90cy12aWV3LnRzIiwic291cmNlcyI6WyIvaG9tZS9qYW1lcy8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvbGliL21haW4vYXRvbS9jb21wb25lbnRzL3RzLXZpZXcudHMiXSwibmFtZXMiOlsiVHNWaWV3IiwiVHNWaWV3LmNvbnN0cnVjdG9yIiwiVHNWaWV3LmNyZWF0ZWRDYWxsYmFjayIsIlRzVmlldy50ZXh0Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZO0FBQ1osNEdBQTRHOzs7Ozs7O0FBRTVHLElBQWEsTUFBTTtJQUFTQSxVQUFmQSxNQUFNQSxVQUFvQkE7SUFBdkNBLFNBQWFBLE1BQU1BO1FBQVNDLDhCQUFXQTtJQTBCdkNBLENBQUNBO0lBdkJHRCxnQ0FBZUEsR0FBZkE7UUFDSUUsSUFBSUEsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7UUFDN0JBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLEVBQUVBLENBQUNBO1FBSXBCQSxBQUZBQSwyQkFBMkJBO1FBQzNCQSxrSEFBa0hBO1lBQzlHQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQSxhQUFhQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBO1FBQ3BGQSxhQUFhQSxDQUFDQSxnQkFBZ0JBLENBQUNBLFFBQVFBLENBQUNBLGVBQWVBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBLENBQUNBO1FBQzFFQSxhQUFhQSxDQUFDQSxlQUFlQSxDQUFDQSxVQUFVQSxDQUFDQSxFQUFFQSxpQkFBaUJBO1FBQzVEQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFTQSxhQUFjQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQTtRQUMzREEsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsRUFBRUEsS0FBS0EsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsT0FBT0EsRUFBRUEsRUFBRUEsd0RBQXdEQTtRQUNwSUEsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFDeEJBLElBQUlBLE9BQU9BLEdBQVNBLElBQUtBLENBQUNBLFFBQVFBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQUE7UUFDcEVBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO1FBQzNCQSxNQUFNQSxDQUFDQSxjQUFjQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUU1QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7SUFDcENBLENBQUNBO0lBRURGLE1BQU1BO0lBQ05BLHFCQUFJQSxHQUFKQSxVQUFLQSxJQUFZQTtRQUNiRyxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUM5QkEsQ0FBQ0E7SUFDTEgsYUFBQ0E7QUFBREEsQ0FBQ0EsQUExQkQsRUFBNEIsV0FBVyxFQTBCdEM7QUExQlksY0FBTSxHQUFOLE1BMEJaLENBQUE7QUFFSyxRQUFTLENBQUMsZUFBZSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNvbWUgZG9jc1xuLy8gaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvd2ViY29tcG9uZW50cy9jdXN0b21lbGVtZW50cy8gKGxvb2sgYXQgbGlmZWN5Y2xlIGNhbGxiYWNrIG1ldGhvZHMpXG5cbmV4cG9ydCBjbGFzcyBUc1ZpZXcgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgZWRpdG9yRWxlbWVudDtcbiAgICBlZGl0b3I7XG4gICAgY3JlYXRlZENhbGxiYWNrKCkge1xuICAgICAgICB2YXIgcHJldmlldyA9IHRoaXMuaW5uZXJUZXh0O1xuICAgICAgICB0aGlzLmlubmVyVGV4dCA9IFwiXCI7XG5cbiAgICAgICAgLy8gQmFzZWQgb24gbWFya2Rvd24gZWRpdG9yXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL21hcmtkb3duLXByZXZpZXcvYmxvYi8yYmNiYWRhYzM5ODBmMWFlYjQ1NWY3MDc4YmQxZmRmYjRlNmZlNmIxL2xpYi9yZW5kZXJlci5jb2ZmZWUjTDExMVxuICAgICAgICB2YXIgZWRpdG9yRWxlbWVudCA9IHRoaXMuZWRpdG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F0b20tdGV4dC1lZGl0b3InKTtcbiAgICAgICAgZWRpdG9yRWxlbWVudC5zZXRBdHRyaWJ1dGVOb2RlKGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSgnZ3V0dGVyLWhpZGRlbicpKTtcbiAgICAgICAgZWRpdG9yRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7IC8vIG1ha2UgcmVhZC1vbmx5XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvciA9ICg8YW55PmVkaXRvckVsZW1lbnQpLmdldE1vZGVsKCk7XG4gICAgICAgIGVkaXRvci5nZXREZWNvcmF0aW9ucyh7IGNsYXNzOiAnY3Vyc29yLWxpbmUnLCB0eXBlOiAnbGluZScgfSlbMF0uZGVzdHJveSgpOyAvLyByZW1vdmUgdGhlIGRlZmF1bHQgc2VsZWN0aW9uIG9mIGEgbGluZSBpbiBlYWNoIGVkaXRvclxuICAgICAgICBlZGl0b3Iuc2V0VGV4dChwcmV2aWV3KTtcbiAgICAgICAgdmFyIGdyYW1tYXIgPSAoPGFueT5hdG9tKS5ncmFtbWFycy5ncmFtbWFyRm9yU2NvcGVOYW1lKFwic291cmNlLnRzeFwiKVxuICAgICAgICBlZGl0b3Iuc2V0R3JhbW1hcihncmFtbWFyKTtcbiAgICAgICAgZWRpdG9yLnNldFNvZnRXcmFwcGVkKHRydWUpO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWRpdG9yRWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gQVBJXG4gICAgdGV4dCh0ZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VGV4dCh0ZXh0KTtcbiAgICB9XG59XG5cbig8YW55PmRvY3VtZW50KS5yZWdpc3RlckVsZW1lbnQoJ3RzLXZpZXcnLCBUc1ZpZXcpO1xuIl19
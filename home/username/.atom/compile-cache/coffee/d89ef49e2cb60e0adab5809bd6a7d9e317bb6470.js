(function() {
  describe('editor-linter', function() {
    var EditorLinter, editorLinter, getMessage, ref, textEditor, wait;
    ref = require('./common'), getMessage = ref.getMessage, wait = ref.wait;
    EditorLinter = require('../lib/editor-linter');
    editorLinter = null;
    textEditor = null;
    beforeEach(function() {
      global.setTimeout = require('remote').getGlobal('setTimeout');
      global.setInterval = require('remote').getGlobal('setInterval');
      return waitsForPromise(function() {
        atom.workspace.destroyActivePaneItem();
        return atom.workspace.open(__dirname + '/fixtures/file.txt').then(function() {
          if (editorLinter != null) {
            editorLinter.dispose();
          }
          textEditor = atom.workspace.getActiveTextEditor();
          return editorLinter = new EditorLinter(textEditor);
        });
      });
    });
    describe('::constructor', function() {
      return it("cries when provided argument isn't a TextEditor", function() {
        expect(function() {
          return new EditorLinter;
        }).toThrow();
        expect(function() {
          return new EditorLinter(null);
        }).toThrow();
        return expect(function() {
          return new EditorLinter(55);
        }).toThrow();
      });
    });
    describe('::{add, remove}Message', function() {
      return it('adds/removes decorations from the editor', function() {
        var countDecorations, message;
        countDecorations = textEditor.getDecorations().length;
        editorLinter.underlineIssues = true;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        expect(textEditor.getDecorations().length).toBe(countDecorations + 1);
        editorLinter.deleteMessage(message);
        return expect(textEditor.getDecorations().length).toBe(countDecorations);
      });
    });
    describe('::getMessages', function() {
      return it('returns a set of messages', function() {
        var message, messageSet;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        messageSet = editorLinter.getMessages();
        editorLinter.addMessage(message);
        expect(messageSet.has(message)).toBe(true);
        editorLinter.deleteMessage(message);
        return expect(messageSet.has(message)).toBe(false);
      });
    });
    describe('::onDidMessage{Add, Change, Delete}', function() {
      return it('notifies us of the changes to messages', function() {
        var message, messageAdd, messageChange, messageRemove;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        messageAdd = jasmine.createSpy('messageAdd');
        messageChange = jasmine.createSpy('messageChange');
        messageRemove = jasmine.createSpy('messageRemove');
        editorLinter.onDidMessageAdd(messageAdd);
        editorLinter.onDidMessageChange(messageChange);
        editorLinter.onDidMessageDelete(messageRemove);
        editorLinter.addMessage(message);
        expect(messageAdd).toHaveBeenCalled();
        expect(messageAdd).toHaveBeenCalledWith(message);
        expect(messageChange).toHaveBeenCalled();
        expect(messageChange.mostRecentCall.args[0].type).toBe('add');
        expect(messageChange.mostRecentCall.args[0].message).toBe(message);
        editorLinter.deleteMessage(message);
        expect(messageRemove).toHaveBeenCalled();
        expect(messageRemove).toHaveBeenCalledWith(message);
        expect(messageChange.mostRecentCall.args[0].type).toBe('delete');
        return expect(messageChange.mostRecentCall.args[0].message).toBe(message);
      });
    });
    describe('::active', function() {
      return it('updates currentFile attribute on the messages', function() {
        var message;
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        expect(message.currentFile).toBe(true);
        editorLinter.active = false;
        expect(message.currentFile).toBe(false);
        editorLinter.deleteMessage(message);
        editorLinter.addMessage(message);
        return expect(message.currentFile).toBe(false);
      });
    });
    describe('::{calculateLineMessages, onDidCalculateLineMessages}', function() {
      return it('works and also ignores', function() {
        var listener, message;
        listener = jasmine.createSpy('onDidCalculateLineMessages');
        message = getMessage('Hey!', __dirname + '/fixtures/file.txt', [[0, 1], [0, 2]]);
        editorLinter.addMessage(message);
        editorLinter.onDidCalculateLineMessages(listener);
        atom.config.set('linter.showErrorTabLine', true);
        expect(editorLinter.calculateLineMessages(0)).toBe(1);
        expect(editorLinter.countLineMessages).toBe(1);
        expect(listener).toHaveBeenCalledWith(1);
        atom.config.set('linter.showErrorTabLine', false);
        expect(editorLinter.calculateLineMessages(0)).toBe(0);
        expect(editorLinter.countLineMessages).toBe(0);
        expect(listener).toHaveBeenCalledWith(0);
        atom.config.set('linter.showErrorTabLine', true);
        expect(editorLinter.calculateLineMessages(0)).toBe(1);
        expect(editorLinter.countLineMessages).toBe(1);
        return expect(listener).toHaveBeenCalledWith(1);
      });
    });
    describe('::{handle, add, remove}Gutter', function() {
      return it('handles the attachment and detachment of gutter to text editor', function() {
        editorLinter.gutterEnabled = false;
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.gutterEnabled = true;
        editorLinter.handleGutter();
        expect(editorLinter.gutter === null).toBe(false);
        editorLinter.gutterEnabled = false;
        editorLinter.handleGutter();
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.addGutter();
        expect(editorLinter.gutter === null).toBe(false);
        editorLinter.removeGutter();
        expect(editorLinter.gutter === null).toBe(true);
        editorLinter.removeGutter();
        return expect(editorLinter.gutter === null).toBe(true);
      });
    });
    describe('::onShouldLint', function() {
      it('is triggered on save', function() {
        var timesTriggered;
        timesTriggered = 0;
        editorLinter.onShouldLint(function() {
          return timesTriggered++;
        });
        textEditor.save();
        textEditor.save();
        textEditor.save();
        textEditor.save();
        textEditor.save();
        return expect(timesTriggered).toBe(5);
      });
      return it('respects lintOnFlyInterval config', function() {
        var flyStatus, timeCalled, timeDid;
        timeCalled = null;
        flyStatus = null;
        atom.config.set('linter.lintOnFlyInterval', 300);
        editorLinter.onShouldLint(function(fly) {
          flyStatus = fly;
          return timeCalled = new Date();
        });
        timeDid = new Date();
        editorLinter.editor.insertText("Hey\n");
        return waitsForPromise(function() {
          return wait(300).then(function() {
            expect(timeCalled !== null).toBe(true);
            expect(flyStatus !== null).toBe(true);
            expect(flyStatus).toBe(true);
            expect(timeCalled - timeDid).toBeLessThan(400);
            atom.config.set('linter.lintOnFlyInterval', 600);
            timeCalled = null;
            flyStatus = null;
            timeDid = new Date();
            editorLinter.editor.insertText("Hey\n");
            return wait(600);
          }).then(function() {
            expect(timeCalled !== null).toBe(true);
            expect(flyStatus !== null).toBe(true);
            expect(flyStatus).toBe(true);
            expect(timeCalled - timeDid).toBeGreaterThan(599);
            return expect(timeCalled - timeDid).toBeLessThan(700);
          });
        });
      });
    });
    return describe('::onDidDestroy', function() {
      return it('is called when TextEditor is destroyed', function() {
        var didDestroy;
        didDestroy = false;
        editorLinter.onDidDestroy(function() {
          return didDestroy = true;
        });
        textEditor.destroy();
        return expect(didDestroy).toBe(true);
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvamFtZXMvLmF0b20vcGFja2FnZXMvbGludGVyL3NwZWMvZWRpdG9yLWxpbnRlci1zcGVjLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUFBLFFBQUEsQ0FBUyxlQUFULEVBQTBCLFNBQUE7QUFDeEIsUUFBQTtJQUFBLE1BQXFCLE9BQUEsQ0FBUSxVQUFSLENBQXJCLEVBQUMsMkJBQUQsRUFBYTtJQUNiLFlBQUEsR0FBZSxPQUFBLENBQVEsc0JBQVI7SUFDZixZQUFBLEdBQWU7SUFDZixVQUFBLEdBQWE7SUFFYixVQUFBLENBQVcsU0FBQTtNQUNULE1BQU0sQ0FBQyxVQUFQLEdBQW9CLE9BQUEsQ0FBUSxRQUFSLENBQWlCLENBQUMsU0FBbEIsQ0FBNEIsWUFBNUI7TUFDcEIsTUFBTSxDQUFDLFdBQVAsR0FBcUIsT0FBQSxDQUFRLFFBQVIsQ0FBaUIsQ0FBQyxTQUFsQixDQUE0QixhQUE1QjthQUNyQixlQUFBLENBQWdCLFNBQUE7UUFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFmLENBQUE7ZUFDQSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQWYsQ0FBb0IsU0FBQSxHQUFZLG9CQUFoQyxDQUFxRCxDQUFDLElBQXRELENBQTJELFNBQUE7O1lBQ3pELFlBQVksQ0FBRSxPQUFkLENBQUE7O1VBQ0EsVUFBQSxHQUFhLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQWYsQ0FBQTtpQkFDYixZQUFBLEdBQW1CLElBQUEsWUFBQSxDQUFhLFVBQWI7UUFIc0MsQ0FBM0Q7TUFGYyxDQUFoQjtJQUhTLENBQVg7SUFVQSxRQUFBLENBQVMsZUFBVCxFQUEwQixTQUFBO2FBQ3hCLEVBQUEsQ0FBRyxpREFBSCxFQUFzRCxTQUFBO1FBQ3BELE1BQUEsQ0FBTyxTQUFBO2lCQUNMLElBQUk7UUFEQyxDQUFQLENBRUEsQ0FBQyxPQUZELENBQUE7UUFHQSxNQUFBLENBQU8sU0FBQTtpQkFDRCxJQUFBLFlB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LENBQTdDO0lBRHlCLENBQTNCO0VBNUp3QixDQUExQjtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZGVzY3JpYmUgJ2VkaXRvci1saW50ZXInLCAtPlxuICB7Z2V0TWVzc2FnZSwgd2FpdH0gPSByZXF1aXJlKCcuL2NvbW1vbicpXG4gIEVkaXRvckxpbnRlciA9IHJlcXVpcmUoJy4uL2xpYi9lZGl0b3ItbGludGVyJylcbiAgZWRpdG9yTGludGVyID0gbnVsbFxuICB0ZXh0RWRpdG9yID0gbnVsbFxuXG4gIGJlZm9yZUVhY2ggLT5cbiAgICBnbG9iYWwuc2V0VGltZW91dCA9IHJlcXVpcmUoJ3JlbW90ZScpLmdldEdsb2JhbCgnc2V0VGltZW91dCcpXG4gICAgZ2xvYmFsLnNldEludGVydmFsID0gcmVxdWlyZSgncmVtb3RlJykuZ2V0R2xvYmFsKCdzZXRJbnRlcnZhbCcpXG4gICAgd2FpdHNGb3JQcm9taXNlIC0+XG4gICAgICBhdG9tLndvcmtzcGFjZS5kZXN0cm95QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgYXRvbS53b3Jrc3BhY2Uub3BlbihfX2Rpcm5hbWUgKyAnL2ZpeHR1cmVzL2ZpbGUudHh0JykudGhlbiAtPlxuICAgICAgICBlZGl0b3JMaW50ZXI/LmRpc3Bvc2UoKVxuICAgICAgICB0ZXh0RWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpXG4gICAgICAgIGVkaXRvckxpbnRlciA9IG5ldyBFZGl0b3JMaW50ZXIodGV4dEVkaXRvcilcblxuICBkZXNjcmliZSAnOjpjb25zdHJ1Y3RvcicsIC0+XG4gICAgaXQgXCJjcmllcyB3aGVuIHByb3ZpZGVkIGFyZ3VtZW50IGlzbid0IGEgVGV4dEVkaXRvclwiLCAtPlxuICAgICAgZXhwZWN0IC0+XG4gICAgICAgIG5ldyBFZGl0b3JMaW50ZXJcbiAgICAgIC50b1Rocm93KClcbiAgICAgIGV4cGVjdCAtPlxuICAgICAgICBuZXcgRWRpdG9yTGludGVyKG51bGwpXG4gICAgICAudG9UaHJvdygpXG4gICAgICBleHBlY3QgLT5cbiAgICAgICAgbmV3IEVkaXRvckxpbnRlcig1NSlcbiAgICAgIC50b1Rocm93KClcblxuICBkZXNjcmliZSAnOjp7YWRkLCByZW1vdmV9TWVzc2FnZScsIC0+XG4gICAgaXQgJ2FkZHMvcmVtb3ZlcyBkZWNvcmF0aW9ucyBmcm9tIHRoZSBlZGl0b3InLCAtPlxuICAgICAgY291bnREZWNvcmF0aW9ucyA9IHRleHRFZGl0b3IuZ2V0RGVjb3JhdGlvbnMoKS5sZW5ndGhcbiAgICAgIGVkaXRvckxpbnRlci51bmRlcmxpbmVJc3N1ZXMgPSB0cnVlXG4gICAgICBtZXNzYWdlID0gZ2V0TWVzc2FnZSgnSGV5IScsIF9fZGlybmFtZSArICcvZml4dHVyZXMvZmlsZS50eHQnLCBbWzAsIDFdLCBbMCwgMl1dKVxuICAgICAgZWRpdG9yTGludGVyLmFkZE1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGV4cGVjdCh0ZXh0RWRpdG9yLmdldERlY29yYXRpb25zKCkubGVuZ3RoKS50b0JlKGNvdW50RGVjb3JhdGlvbnMgKyAxKVxuICAgICAgZWRpdG9yTGludGVyLmRlbGV0ZU1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGV4cGVjdCh0ZXh0RWRpdG9yLmdldERlY29yYXRpb25zKCkubGVuZ3RoKS50b0JlKGNvdW50RGVjb3JhdGlvbnMpXG5cbiAgZGVzY3JpYmUgJzo6Z2V0TWVzc2FnZXMnLCAtPlxuICAgIGl0ICdyZXR1cm5zIGEgc2V0IG9mIG1lc3NhZ2VzJywgLT5cbiAgICAgIG1lc3NhZ2UgPSBnZXRNZXNzYWdlKCdIZXkhJywgX19kaXJuYW1lICsgJy9maXh0dXJlcy9maWxlLnR4dCcsIFtbMCwgMV0sIFswLCAyXV0pXG4gICAgICBtZXNzYWdlU2V0ID0gZWRpdG9yTGludGVyLmdldE1lc3NhZ2VzKClcbiAgICAgIGVkaXRvckxpbnRlci5hZGRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZVNldC5oYXMobWVzc2FnZSkpLnRvQmUodHJ1ZSlcbiAgICAgIGVkaXRvckxpbnRlci5kZWxldGVNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZVNldC5oYXMobWVzc2FnZSkpLnRvQmUoZmFsc2UpXG5cbiAgZGVzY3JpYmUgJzo6b25EaWRNZXNzYWdle0FkZCwgQ2hhbmdlLCBEZWxldGV9JywgLT5cbiAgICBpdCAnbm90aWZpZXMgdXMgb2YgdGhlIGNoYW5nZXMgdG8gbWVzc2FnZXMnLCAtPlxuICAgICAgbWVzc2FnZSA9IGdldE1lc3NhZ2UoJ0hleSEnLCBfX2Rpcm5hbWUgKyAnL2ZpeHR1cmVzL2ZpbGUudHh0JywgW1swLCAxXSwgWzAsIDJdXSlcbiAgICAgIG1lc3NhZ2VBZGQgPSBqYXNtaW5lLmNyZWF0ZVNweSgnbWVzc2FnZUFkZCcpXG4gICAgICBtZXNzYWdlQ2hhbmdlID0gamFzbWluZS5jcmVhdGVTcHkoJ21lc3NhZ2VDaGFuZ2UnKVxuICAgICAgbWVzc2FnZVJlbW92ZSA9IGphc21pbmUuY3JlYXRlU3B5KCdtZXNzYWdlUmVtb3ZlJylcbiAgICAgIGVkaXRvckxpbnRlci5vbkRpZE1lc3NhZ2VBZGQobWVzc2FnZUFkZClcbiAgICAgIGVkaXRvckxpbnRlci5vbkRpZE1lc3NhZ2VDaGFuZ2UobWVzc2FnZUNoYW5nZSlcbiAgICAgIGVkaXRvckxpbnRlci5vbkRpZE1lc3NhZ2VEZWxldGUobWVzc2FnZVJlbW92ZSlcbiAgICAgIGVkaXRvckxpbnRlci5hZGRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBleHBlY3QobWVzc2FnZUFkZCkudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBleHBlY3QobWVzc2FnZUFkZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobWVzc2FnZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdChtZXNzYWdlQ2hhbmdlLm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0udHlwZSkudG9CZSgnYWRkJylcbiAgICAgIGV4cGVjdChtZXNzYWdlQ2hhbmdlLm1vc3RSZWNlbnRDYWxsLmFyZ3NbMF0ubWVzc2FnZSkudG9CZShtZXNzYWdlKVxuICAgICAgZWRpdG9yTGludGVyLmRlbGV0ZU1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlUmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdChtZXNzYWdlUmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtZXNzYWdlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VDaGFuZ2UubW9zdFJlY2VudENhbGwuYXJnc1swXS50eXBlKS50b0JlKCdkZWxldGUnKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VDaGFuZ2UubW9zdFJlY2VudENhbGwuYXJnc1swXS5tZXNzYWdlKS50b0JlKG1lc3NhZ2UpXG5cbiAgZGVzY3JpYmUgJzo6YWN0aXZlJywgLT5cbiAgICBpdCAndXBkYXRlcyBjdXJyZW50RmlsZSBhdHRyaWJ1dGUgb24gdGhlIG1lc3NhZ2VzJywgLT5cbiAgICAgIG1lc3NhZ2UgPSBnZXRNZXNzYWdlKCdIZXkhJywgX19kaXJuYW1lICsgJy9maXh0dXJlcy9maWxlLnR4dCcsIFtbMCwgMV0sIFswLCAyXV0pXG4gICAgICBlZGl0b3JMaW50ZXIuYWRkTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2UuY3VycmVudEZpbGUpLnRvQmUodHJ1ZSlcbiAgICAgIGVkaXRvckxpbnRlci5hY3RpdmUgPSBmYWxzZVxuICAgICAgZXhwZWN0KG1lc3NhZ2UuY3VycmVudEZpbGUpLnRvQmUoZmFsc2UpXG4gICAgICBlZGl0b3JMaW50ZXIuZGVsZXRlTWVzc2FnZShtZXNzYWdlKVxuICAgICAgZWRpdG9yTGludGVyLmFkZE1lc3NhZ2UobWVzc2FnZSlcbiAgICAgIGV4cGVjdChtZXNzYWdlLmN1cnJlbnRGaWxlKS50b0JlKGZhbHNlKVxuXG4gIGRlc2NyaWJlICc6OntjYWxjdWxhdGVMaW5lTWVzc2FnZXMsIG9uRGlkQ2FsY3VsYXRlTGluZU1lc3NhZ2VzfScsIC0+XG4gICAgaXQgJ3dvcmtzIGFuZCBhbHNvIGlnbm9yZXMnLCAtPlxuICAgICAgbGlzdGVuZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnb25EaWRDYWxjdWxhdGVMaW5lTWVzc2FnZXMnKVxuICAgICAgbWVzc2FnZSA9IGdldE1lc3NhZ2UoJ0hleSEnLCBfX2Rpcm5hbWUgKyAnL2ZpeHR1cmVzL2ZpbGUudHh0JywgW1swLCAxXSwgWzAsIDJdXSlcbiAgICAgIGVkaXRvckxpbnRlci5hZGRNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBlZGl0b3JMaW50ZXIub25EaWRDYWxjdWxhdGVMaW5lTWVzc2FnZXMobGlzdGVuZXIpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci5zaG93RXJyb3JUYWJMaW5lJywgdHJ1ZSlcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuY2FsY3VsYXRlTGluZU1lc3NhZ2VzKDApKS50b0JlKDEpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmNvdW50TGluZU1lc3NhZ2VzKS50b0JlKDEpXG4gICAgICBleHBlY3QobGlzdGVuZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci5zaG93RXJyb3JUYWJMaW5lJywgZmFsc2UpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmNhbGN1bGF0ZUxpbmVNZXNzYWdlcygwKSkudG9CZSgwKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5jb3VudExpbmVNZXNzYWdlcykudG9CZSgwKVxuICAgICAgZXhwZWN0KGxpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgwKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXIuc2hvd0Vycm9yVGFiTGluZScsIHRydWUpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmNhbGN1bGF0ZUxpbmVNZXNzYWdlcygwKSkudG9CZSgxKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5jb3VudExpbmVNZXNzYWdlcykudG9CZSgxKVxuICAgICAgZXhwZWN0KGxpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKVxuXG4gIGRlc2NyaWJlICc6OntoYW5kbGUsIGFkZCwgcmVtb3ZlfUd1dHRlcicsIC0+XG4gICAgaXQgJ2hhbmRsZXMgdGhlIGF0dGFjaG1lbnQgYW5kIGRldGFjaG1lbnQgb2YgZ3V0dGVyIHRvIHRleHQgZWRpdG9yJywgLT5cbiAgICAgIGVkaXRvckxpbnRlci5ndXR0ZXJFbmFibGVkID0gZmFsc2VcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuZ3V0dGVyIGlzIG51bGwpLnRvQmUodHJ1ZSlcbiAgICAgIGVkaXRvckxpbnRlci5ndXR0ZXJFbmFibGVkID0gdHJ1ZVxuICAgICAgZWRpdG9yTGludGVyLmhhbmRsZUd1dHRlcigpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmd1dHRlciBpcyBudWxsKS50b0JlKGZhbHNlKVxuICAgICAgZWRpdG9yTGludGVyLmd1dHRlckVuYWJsZWQgPSBmYWxzZVxuICAgICAgZWRpdG9yTGludGVyLmhhbmRsZUd1dHRlcigpXG4gICAgICBleHBlY3QoZWRpdG9yTGludGVyLmd1dHRlciBpcyBudWxsKS50b0JlKHRydWUpXG4gICAgICBlZGl0b3JMaW50ZXIuYWRkR3V0dGVyKClcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuZ3V0dGVyIGlzIG51bGwpLnRvQmUoZmFsc2UpXG4gICAgICBlZGl0b3JMaW50ZXIucmVtb3ZlR3V0dGVyKClcbiAgICAgIGV4cGVjdChlZGl0b3JMaW50ZXIuZ3V0dGVyIGlzIG51bGwpLnRvQmUodHJ1ZSlcbiAgICAgIGVkaXRvckxpbnRlci5yZW1vdmVHdXR0ZXIoKVxuICAgICAgZXhwZWN0KGVkaXRvckxpbnRlci5ndXR0ZXIgaXMgbnVsbCkudG9CZSh0cnVlKVxuXG4gIGRlc2NyaWJlICc6Om9uU2hvdWxkTGludCcsIC0+XG4gICAgaXQgJ2lzIHRyaWdnZXJlZCBvbiBzYXZlJywgLT5cbiAgICAgIHRpbWVzVHJpZ2dlcmVkID0gMFxuICAgICAgZWRpdG9yTGludGVyLm9uU2hvdWxkTGludCAtPlxuICAgICAgICB0aW1lc1RyaWdnZXJlZCsrXG4gICAgICB0ZXh0RWRpdG9yLnNhdmUoKVxuICAgICAgdGV4dEVkaXRvci5zYXZlKClcbiAgICAgIHRleHRFZGl0b3Iuc2F2ZSgpXG4gICAgICB0ZXh0RWRpdG9yLnNhdmUoKVxuICAgICAgdGV4dEVkaXRvci5zYXZlKClcbiAgICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSg1KVxuICAgIGl0ICdyZXNwZWN0cyBsaW50T25GbHlJbnRlcnZhbCBjb25maWcnLCAtPlxuICAgICAgdGltZUNhbGxlZCA9IG51bGxcbiAgICAgIGZseVN0YXR1cyA9IG51bGxcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLmxpbnRPbkZseUludGVydmFsJywgMzAwKVxuICAgICAgZWRpdG9yTGludGVyLm9uU2hvdWxkTGludCAoZmx5KSAtPlxuICAgICAgICBmbHlTdGF0dXMgPSBmbHlcbiAgICAgICAgdGltZUNhbGxlZCA9IG5ldyBEYXRlKClcbiAgICAgIHRpbWVEaWQgPSBuZXcgRGF0ZSgpXG4gICAgICBlZGl0b3JMaW50ZXIuZWRpdG9yLmluc2VydFRleHQoXCJIZXlcXG5cIilcbiAgICAgIHdhaXRzRm9yUHJvbWlzZSAtPlxuICAgICAgICB3YWl0KDMwMCkudGhlbiAtPlxuICAgICAgICAgIGV4cGVjdCh0aW1lQ2FsbGVkIGlzbnQgbnVsbCkudG9CZSh0cnVlKVxuICAgICAgICAgIGV4cGVjdChmbHlTdGF0dXMgaXNudCBudWxsKS50b0JlKHRydWUpXG4gICAgICAgICAgZXhwZWN0KGZseVN0YXR1cykudG9CZSh0cnVlKVxuICAgICAgICAgIGV4cGVjdCh0aW1lQ2FsbGVkIC0gdGltZURpZCkudG9CZUxlc3NUaGFuKDQwMClcblxuICAgICAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLmxpbnRPbkZseUludGVydmFsJywgNjAwKVxuICAgICAgICAgIHRpbWVDYWxsZWQgPSBudWxsXG4gICAgICAgICAgZmx5U3RhdHVzID0gbnVsbFxuICAgICAgICAgIHRpbWVEaWQgPSBuZXcgRGF0ZSgpXG4gICAgICAgICAgZWRpdG9yTGludGVyLmVkaXRvci5pbnNlcnRUZXh0KFwiSGV5XFxuXCIpXG5cbiAgICAgICAgICB3YWl0KDYwMClcbiAgICAgICAgLnRoZW4gLT5cbiAgICAgICAgICBleHBlY3QodGltZUNhbGxlZCBpc250IG51bGwpLnRvQmUodHJ1ZSlcbiAgICAgICAgICBleHBlY3QoZmx5U3RhdHVzIGlzbnQgbnVsbCkudG9CZSh0cnVlKVxuICAgICAgICAgIGV4cGVjdChmbHlTdGF0dXMpLnRvQmUodHJ1ZSlcbiAgICAgICAgICBleHBlY3QodGltZUNhbGxlZCAtIHRpbWVEaWQpLnRvQmVHcmVhdGVyVGhhbig1OTkpXG4gICAgICAgICAgZXhwZWN0KHRpbWVDYWxsZWQgLSB0aW1lRGlkKS50b0JlTGVzc1RoYW4oNzAwKVxuXG4gIGRlc2NyaWJlICc6Om9uRGlkRGVzdHJveScsIC0+XG4gICAgaXQgJ2lzIGNhbGxlZCB3aGVuIFRleHRFZGl0b3IgaXMgZGVzdHJveWVkJywgLT5cbiAgICAgIGRpZERlc3Ryb3kgPSBmYWxzZVxuICAgICAgZWRpdG9yTGludGVyLm9uRGlkRGVzdHJveSAtPlxuICAgICAgICBkaWREZXN0cm95ID0gdHJ1ZVxuICAgICAgdGV4dEVkaXRvci5kZXN0cm95KClcbiAgICAgIGV4cGVjdChkaWREZXN0cm95KS50b0JlKHRydWUpXG4iXX0=
